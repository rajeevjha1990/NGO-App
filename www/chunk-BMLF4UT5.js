import"./chunk-KBYXFPZA.js";import"./chunk-QT2IR2AI.js";import{b as oe}from"./chunk-TRJ775NK.js";import{$a as ne,A as w,B as S,Ba as G,C as A,Ea as J,Fa as K,G as E,H as D,I as T,J as z,L as F,M as j,Ma as Q,N as k,O as N,Oa as X,Pa as Z,Ra as ee,Ua as te,Z as L,_ as R,da as V,db as ie,ea as B,g as O,h as u,i as P,j as o,k as f,l as v,m as x,n as l,na as H,o as e,p as i,q as g,qa as U,r as y,ra as W,s as I,sa as $,t as C,u as b,ua as Y,w as r,wa as q,x as h,y as p,z as M}from"./chunk-6RAZA6VU.js";import"./chunk-AW7IZUNH.js";import"./chunk-QUJFQN2Y.js";import"./chunk-4SQRGWZO.js";import"./chunk-AGW4ECHM.js";import"./chunk-FHFIUQVW.js";import"./chunk-4QUK7M54.js";import"./chunk-KEPJZG4G.js";import"./chunk-J4TEZE7G.js";import"./chunk-WI6SOTL5.js";import"./chunk-QNCTVU3D.js";import"./chunk-KYMKABGL.js";import"./chunk-44WLN7XP.js";import"./chunk-IZQDRDWN.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-H7IJB4EE.js";import"./chunk-CKP3SGE2.js";import"./chunk-BVXZQL7V.js";import"./chunk-26IOXOZM.js";import"./chunk-EQZVBGP4.js";import"./chunk-NPYKXPTT.js";import"./chunk-LSNLUNBJ.js";import"./chunk-DNTR6X5U.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-G7SWQJ6W.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{h as _}from"./chunk-B7O3QC5Z.js";function ae(s,c){if(s&1&&(e(0,"ion-select-option",28),r(1),i()),s&2){let t=c.$implicit;l("value",t.volntr_id),o(),p(" ",t.volntr_name," ")}}function se(s,c){if(s&1){let t=y();e(0,"ion-card",7)(1,"ion-card-header")(2,"div",8)(3,"ion-badge",9),r(4),i(),e(5,"span",10),r(6),E(7,"date"),i()(),e(8,"ion-card-title"),r(9),i()(),e(10,"ion-card-content")(11,"div",11)(12,"div",12),g(13,"ion-icon",13),e(14,"p"),r(15),i()(),e(16,"div",12),g(17,"ion-icon",14),e(18,"p"),r(19),i()(),e(20,"div",12),g(21,"ion-icon",15),e(22,"p"),r(23),i()()(),e(24,"div",16)(25,"div",17)(26,"span",18),r(27,"Payment"),i(),e(28,"span",19),r(29),i()(),e(30,"div",20),r(31),i()(),e(32,"div",21)(33,"a",22),g(34,"ion-icon",23),r(35," Call "),i()(),e(36,"ion-item",24)(37,"ion-label",25),r(38,"Assign to Associate"),i(),e(39,"ion-select",26),A("ngModelChange",function(n){let d=O(t).$implicit;return S(d.selectedAssociate,n)||(d.selectedAssociate=n),u(n)}),I("ionChange",function(n){let d=O(t).$implicit,m=C(2);return u(m.assignToAssociate(d,n))}),x(40,ae,2,2,"ion-select-option",27),i()()()()}if(s&2){let t=c.$implicit,a=C(2);o(3),l("color",t.order_status==="0"?"warning":"success"),o(),p(" ",t.order_status==="0"?"Pending":"Completed"," "),o(2),h(D(7,14,t.assigned_at,"dd MMM, hh:mm a")),o(3),p("ID: #ORD-",t.order_id),o(6),h(t.order_name),o(4),h(t.order_number),o(4),M("",t.order_address,", ",t.order_pincode),o(6),M("",t.payment_mode," - ",t.payment_status),o(2),p("\u20B9",t.amount),o(2),l("href","tel:"+t.order_number,P),o(6),w("ngModel",t.selectedAssociate),o(),l("ngForOf",a.associatesList)}}function de(s,c){if(s&1&&(e(0,"div"),x(1,se,41,17,"ion-card",6),i()),s&2){let t=C();o(),l("ngForOf",t.assignedorders)}}function ce(s,c){s&1&&(e(0,"div",29),g(1,"ion-icon",30),e(2,"h3"),r(3,"No Orders Found"),i(),e(4,"p"),r(5,"Aapke liye koi assigned order nahi hai."),i()())}var ue=(()=>{let c=class c{constructor(a,n,d,m){this.userServ=a,this.alertCtrl=n,this.toastCtrl=d,this.cdr=m,this.assignedorders=[],this.associatesList=[]}ngOnInit(){}ionViewDidEnter(){return _(this,null,function*(){this.loadData()})}loadData(){return _(this,null,function*(){this.assignedorders=[];let a=yield this.userServ.assigneOrders();this.assignedorders=a,this.associatesList=yield this.userServ.myareaAssociates(),this.cdr.detectChanges()})}assignToAssociate(a,n){return _(this,null,function*(){let d=n.detail.value;if(!d)return;yield(yield this.alertCtrl.create({header:"Confirm Assignment!",message:`Are you sure you want to assign Order ID: #ORD-${a.order_id} to this associate?`,buttons:[{text:"NO",role:"cancel",handler:()=>{a.selectedAssociate=null}},{text:"Yes",handler:()=>{let re={order_id:a.order_id,associate_id:d};this.processAssignment(re)}}]})).present()})}processAssignment(a){return _(this,null,function*(){try{let n=yield this.userServ.orderAssignedChoosesAssociate(a);n&&n.status?(yield(yield this.toastCtrl.create({message:n.msg||"Order assigned successfully!",duration:2e3,color:"success"})).present(),yield this.loadData()):alert(n.msg||"Assignment failed")}catch(n){console.error("Error assigning order:",n)}})}};c.\u0275fac=function(n){return new(n||c)(f(oe),f(ne),f(ie),f(z))},c.\u0275cmp=v({type:c,selectors:[["app-assigned-orders"]],decls:10,vars:3,consts:[["noData",""],[1,"ion-no-border"],["color","primary"],["slot","end","color","light",1,"ion-margin-end"],[1,"ion-padding-top"],[4,"ngIf","ngIfElse"],["class","order-card",4,"ngFor","ngForOf"],[1,"order-card"],[1,"header-flex"],[3,"color"],[1,"order-date"],[1,"info-grid"],[1,"info-row"],["name","person"],["name","call"],["name","location"],[1,"payment-bar"],[1,"pay-method"],[1,"label"],[1,"val"],[1,"amount-val"],[1,"action-row"],[1,"call-btn",3,"href"],["name","call-outline"],["lines","none",1,"assign-item"],["position","stacked"],["placeholder","Sathi Chunein",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"empty-state"],["name","clipboard-outline"]],template:function(n,d){if(n&1&&(e(0,"ion-header",1)(1,"ion-toolbar",2)(2,"ion-title"),r(3,"Assigned Orders"),i(),e(4,"ion-badge",3),r(5),i()()(),e(6,"ion-content",4),x(7,de,2,1,"div",5)(8,ce,6,0,"ng-template",null,0,T),i()),n&2){let m=b(9);o(5),p(" ",d.assignedorders.length," Orders "),o(2),l("ngIf",d.assignedorders.length>0)("ngIfElse",m)}},dependencies:[q,G,ee,J,K,X,Z,U,$,W,Y,N,F,j,B,L,H,te,Q,V,R,k],styles:[".order-card[_ngcontent-%COMP%]{margin:12px 16px;border-radius:16px;box-shadow:0 8px 20px #0000000f;border:1px solid #f0f0f0}.order-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.order-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .header-flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.order-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:800;color:#333}.order-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .order-date[_ngcontent-%COMP%]{font-size:.75rem;color:#888}.info-grid[_ngcontent-%COMP%]{margin:10px 0}.info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px;margin-bottom:6px}.info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:1.1rem}.info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#555;font-size:.9rem;line-height:1.3}.payment-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#f8f9fa;padding:10px 12px;border-radius:10px;margin:12px 0}.payment-bar[_ngcontent-%COMP%]   .pay-method[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:.7rem;color:#888;text-transform:uppercase}.payment-bar[_ngcontent-%COMP%]   .pay-method[_ngcontent-%COMP%]   .val[_ngcontent-%COMP%]{font-weight:700;color:#2e7d32;font-size:.85rem}.payment-bar[_ngcontent-%COMP%]   .amount-val[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:800;color:#000}.action-row[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:10px}.action-row[_ngcontent-%COMP%]   .call-btn[_ngcontent-%COMP%]{flex:1;height:42px;display:flex;align-items:center;justify-content:center;gap:5px;text-decoration:none;background:#e8f5e9;color:#2e7d32;border-radius:8px;font-weight:600;font-size:.9rem}.action-row[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;--border-radius: 8px;font-weight:600;margin:0;height:42px}.assign-item[_ngcontent-%COMP%]{--background: #f4f5f8;--border-radius: 8px;margin-top:12px;font-size:14px;--padding-start: 12px}.assign-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:1rem;color:#666!important;font-weight:700;margin-bottom:4px}.assign-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{width:100%;padding:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:100px 40px}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:5rem;color:#ccc}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#444;margin-top:20px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888}"]});let s=c;return s})();export{ue as AssignedOrdersPage};
