import{a as Q}from"./chunk-Z7ZZXYSW.js";import{a as z}from"./chunk-EH4MGZEE.js";import{a as K}from"./chunk-SLZSFL74.js";import{a as J}from"./chunk-4ZCO6XU4.js";import{a as U}from"./chunk-SP2N6BLA.js";import{b as q}from"./chunk-TRJ775NK.js";import{$ as P,$a as V,A as s,Aa as E,B as m,Ba as j,C as d,J as w,La as F,O as y,Oa as R,Pa as G,Sa as O,Z as C,_ as M,bb as H,da as k,ea as S,ga as v,j as r,k as g,l as p,n as b,o,oa as I,p as l,q as D,qa as W,ra as N,s as h,sa as A,ua as T,va as L,w as _,wa as B}from"./chunk-6RAZA6VU.js";import"./chunk-AW7IZUNH.js";import"./chunk-QUJFQN2Y.js";import"./chunk-4SQRGWZO.js";import"./chunk-AGW4ECHM.js";import"./chunk-FHFIUQVW.js";import"./chunk-4QUK7M54.js";import"./chunk-KEPJZG4G.js";import"./chunk-J4TEZE7G.js";import"./chunk-WI6SOTL5.js";import"./chunk-QNCTVU3D.js";import"./chunk-KYMKABGL.js";import"./chunk-44WLN7XP.js";import"./chunk-IZQDRDWN.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-H7IJB4EE.js";import"./chunk-CKP3SGE2.js";import"./chunk-BVXZQL7V.js";import"./chunk-26IOXOZM.js";import"./chunk-EQZVBGP4.js";import"./chunk-NPYKXPTT.js";import"./chunk-LSNLUNBJ.js";import"./chunk-DNTR6X5U.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-G7SWQJ6W.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{h as c}from"./chunk-B7O3QC5Z.js";var mt=(()=>{let u=class u{constructor(e,a,i,n,t,X){this.alertCtrl=e,this.navCtrl=a,this.userServ=i,this.pubServ=n,this.modalCtrl=t,this.cdr=X,this.formData={membership_amount:300},this.states=[],this.districts=[],this.blocks=[],this.villages=[]}ngOnInit(){return c(this,null,function*(){this.states=yield this.pubServ.allStates(),this.cdr.markForCheck()})}StateList(){return c(this,null,function*(){let e=yield this.modalCtrl.create({component:z});yield e.present();let{data:a}=yield e.onDidDismiss();a?.state&&(this.formData.state=a.state.state_name,this.formData.state_id=a.state.state_id,this.formData.district="",this.formData.district_id=null,this.districts=yield this.pubServ.districtByState(this.formData.state_id),this.formData.block="",this.formData.block_id=null,this.blocks=[],this.formData.village="",this.formData.village_id=null,this.villages=[])})}DistrictList(){return c(this,null,function*(){if(!this.formData.state_id)return this.showAlert("Please select a state first");let e=yield this.modalCtrl.create({component:K,componentProps:{stateId:this.formData.state_id}});yield e.present();let{data:a}=yield e.onDidDismiss();a?.district&&(this.formData.district=a.district.district_name,this.formData.district_id=a.district.district_id,this.blocks=yield this.pubServ.blockByDistrict(this.formData.district_id),this.formData.block="",this.formData.block_id=null,this.formData.village="",this.formData.village_id=null,this.villages=[])})}blockList(){return c(this,null,function*(){if(!this.formData.district_id)return this.showAlert("Please select a district first");let e=yield this.modalCtrl.create({component:J,componentProps:{districtId:this.formData.district_id}});yield e.present();let{data:a}=yield e.onDidDismiss();a?.block&&(this.formData.block=a.block.block_name,this.formData.block_id=a.block.block_id,this.villages=yield this.pubServ.villageByBlock(this.formData.block_id),this.formData.village="",this.formData.village_id=null)})}VillageList(){return c(this,null,function*(){if(!this.formData.block_id)return this.showAlert("Please select a block first");let e=yield this.modalCtrl.create({component:Q,componentProps:{blockId:this.formData.block_id}});yield e.present();let{data:a}=yield e.onDidDismiss();a?.village&&(this.formData.village=a.village.village_name,this.formData.village_id=a.village.village_id)})}saveData(){return c(this,null,function*(){let e=this.formData;if(!e.member_name?.trim())return this.showAlert("Please enter Name");if(!e.guardian?.trim())return this.showAlert("Please enter Guardian name");if(!e.state_id)return this.showAlert("Please select a state");if(!e.district_id)return this.showAlert("Please select a district");if(!e.block_id)return this.showAlert("Please select a block");if(!e.pincode||e.pincode.toString().length!==6)return this.showAlert("Please enter valid 6-digit pincode");if(!e.mobile||!/^\d{10}$/.test(e.mobile))return this.showAlert("Please enter valid 10-digit mobile number");if(!e.membership_amount||e.membership_amount<300)return this.showAlert("Membership amount must be at least \u20B9300");console.log("Sending to API:",this.formData);let a=yield this.userServ.saintriDistribution(this.formData);a?.status?this.navCtrl.navigateForward(["/distributed-saintries"]):this.showAlert(a?.msg||"Submission failed")})}showAlert(e){return c(this,null,function*(){yield(yield this.alertCtrl.create({header:"Notice",message:e,buttons:["OK"]})).present()})}checkAmount(){let e=Number(this.formData.membership_amount);(!e||e<300)&&(this.formData.membership_amount=300,this.cdr.markForCheck())}};u.\u0275fac=function(a){return new(a||u)(g(V),g(v),g(q),g(U),g(H),g(w))},u.\u0275cmp=p({type:u,selectors:[["app-new-distribution"]],decls:33,vars:10,consts:[[3,"translucent"],[1,"ion-padding"],["size","12"],["labelPlacement","floating","label","Name","fill","outline","type","text",3,"ngModelChange","ngModel"],["labelPlacement","floating","label","Guardian","fill","outline","type","text",3,"ngModelChange","ngModel"],["type","text","name","state","labelPlacement","floating","label","State","fill","outline",3,"ngModelChange","click","ngModel"],["type","text","name","District","labelPlacement","floating","label","District","fill","outline","readonly","","required","",3,"ngModelChange","click","ngModel"],["labelPlacement","floating","label","Block","fill","outline","type","text",3,"click","ngModelChange","ngModel"],["labelPlacement","floating","label","Village","fill","outline","type","text",3,"ngModelChange","ngModel"],["labelPlacement","floating","label","Pincode","fill","outline","type","text",3,"ngModelChange","ngModel"],["labelPlacement","floating","label","Mobile","fill","outline","type","text",3,"ngModelChange","ngModel"],["labelPlacement","floating","label","Membership Amount ","fill","outline","type","number","min","300",3,"ngModelChange","ionChange","ngModel"],["expand","block","type","submit",1,"ion-margin-top",3,"click"]],template:function(a,i){a&1&&(o(0,"ion-header",0)(1,"ion-toolbar"),D(2,"ion-title"),l()(),o(3,"ion-content",1)(4,"ion-card")(5,"ion-card-header")(6,"ion-card-title"),_(7,"New Saintri Distribution"),l()(),o(8,"ion-card-content")(9,"ion-grid")(10,"ion-row")(11,"ion-col",2)(12,"ion-input",3),d("ngModelChange",function(t){return m(i.formData.member_name,t)||(i.formData.member_name=t),t}),l()(),o(13,"ion-col",2)(14,"ion-input",4),d("ngModelChange",function(t){return m(i.formData.guardian,t)||(i.formData.guardian=t),t}),l()(),o(15,"ion-col",2)(16,"ion-input",5),d("ngModelChange",function(t){return m(i.formData.state,t)||(i.formData.state=t),t}),h("click",function(){return i.StateList()}),l()(),o(17,"ion-col",2)(18,"ion-input",6),d("ngModelChange",function(t){return m(i.formData.district,t)||(i.formData.district=t),t}),h("click",function(){return i.DistrictList()}),l()(),o(19,"ion-col",2)(20,"ion-input",7),h("click",function(){return i.blockList()}),d("ngModelChange",function(t){return m(i.formData.block,t)||(i.formData.block=t),t}),l()(),o(21,"ion-col",2)(22,"ion-input",8),d("ngModelChange",function(t){return m(i.formData.village,t)||(i.formData.village=t),t}),l()(),o(23,"ion-col",2)(24,"ion-input",9),d("ngModelChange",function(t){return m(i.formData.pincode,t)||(i.formData.pincode=t),t}),l()(),o(25,"ion-col",2)(26,"ion-input",10),d("ngModelChange",function(t){return m(i.formData.mobile,t)||(i.formData.mobile=t),t}),l()(),o(27,"ion-col",2)(28,"ion-input",11),d("ngModelChange",function(t){return m(i.formData.membership_amount,t)||(i.formData.membership_amount=t),t}),h("ionChange",function(){return i.checkAmount()}),l()()(),o(29,"ion-row")(30,"ion-col",2)(31,"ion-button",12),h("click",function(){return i.saveData()}),_(32," Save Group "),l()()()()()()()),a&2&&(b("translucent",!0),r(12),s("ngModel",i.formData.member_name),r(2),s("ngModel",i.formData.guardian),r(2),s("ngModel",i.formData.state),r(2),s("ngModel",i.formData.district),r(2),s("ngModel",i.formData.block),r(2),s("ngModel",i.formData.village),r(2),s("ngModel",i.formData.pincode),r(2),s("ngModel",i.formData.mobile),r(2),s("ngModel",i.formData.membership_amount))},dependencies:[I,L,B,E,j,O,F,R,G,W,A,N,T,y,S,C,P,k,M],encapsulation:2,changeDetection:0});let f=u;return f})();export{mt as NewDistributionPage};
