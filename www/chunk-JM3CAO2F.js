import{a as q}from"./chunk-SP2N6BLA.js";import{b as B}from"./chunk-TRJ775NK.js";import{$a as U,Ba as D,J as P,L as S,M as y,Ma as N,O as R,Oa as V,Pa as G,Ra as $,S as E,Ua as H,V as w,da as j,ea as F,g as _,h as v,j as o,k as p,l as M,m as f,n as c,o as r,p as i,q as u,qa as T,r as C,ra as L,s as O,t as h,v as x,w as s,wa as z,x as I,xa as A,y as d,ya as k}from"./chunk-6RAZA6VU.js";import"./chunk-AW7IZUNH.js";import"./chunk-QUJFQN2Y.js";import"./chunk-4SQRGWZO.js";import"./chunk-AGW4ECHM.js";import"./chunk-FHFIUQVW.js";import"./chunk-4QUK7M54.js";import"./chunk-KEPJZG4G.js";import"./chunk-J4TEZE7G.js";import"./chunk-WI6SOTL5.js";import"./chunk-QNCTVU3D.js";import"./chunk-KYMKABGL.js";import"./chunk-44WLN7XP.js";import"./chunk-IZQDRDWN.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-H7IJB4EE.js";import"./chunk-CKP3SGE2.js";import"./chunk-BVXZQL7V.js";import"./chunk-26IOXOZM.js";import"./chunk-EQZVBGP4.js";import"./chunk-NPYKXPTT.js";import"./chunk-LSNLUNBJ.js";import"./chunk-DNTR6X5U.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-G7SWQJ6W.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{h as g}from"./chunk-B7O3QC5Z.js";function K(a,l){a&1&&(r(0,"div",11),u(1,"ion-icon",12),r(2,"p"),s(3,"No members found in this group."),i()())}function Q(a,l){if(a&1&&(r(0,"ion-select-option",18),s(1),i()),a&2){let m=l.$implicit;c("value",m.value),o(),d(" ",m.label," ")}}function W(a,l){if(a&1){let m=C();r(0,"ion-card",13)(1,"ion-card-content")(2,"div",14)(3,"h2"),s(4),i(),r(5,"span",15),s(6),i()(),r(7,"p")(8,"b"),s(9,"Mobile:"),i(),s(10),i(),r(11,"ion-select",16),O("ionChange",function(t){let e=_(m).$implicit,b=h();return v(b.changeMemberRole(e,t.detail.value))}),f(12,Q,2,2,"ion-select-option",17),i()()()}if(a&2){let m=l.$implicit,n=h();o(4),I(m.name),o(),x("color",n.getRoleColor(m.role)),o(),d(" (",m.role||"Member",") "),o(4),d(" ",m.mobile),o(),c("value",m.role),o(),c("ngForOf",n.getAvailableRoles(m))}}var le=(()=>{let l=class l{constructor(n,t,e,b,J){this.activatedRoute=n,this.pubServ=t,this.userServ=e,this.alertCtrl=b,this.cdr=J,this.groupMembers=[],this.groupObject={},this.rolesList=[{value:"Leader",label:"Leader"},{value:"Assistant",label:"Assistant"},{value:"Treasurer",label:"Treasurer"},{value:"Secretary",label:"Secretary"},{value:"",label:"Member"}],this.canChangeRoles=!1}ngOnInit(){return g(this,null,function*(){this.activatedRoute.paramMap.subscribe(t=>{this.groupId=t.get("groupId")}),(yield this.userServ.epGroups()).forEach(t=>{this.groupObject[t.group_id]=t})})}ionViewDidEnter(){return g(this,null,function*(){this.groupMembers=yield this.pubServ.groupmembers(this.groupId),this.cdr.detectChanges()})}getRoleColor(n){switch(n){case"Leader":return"#28a745";case"Assistant":return"#f4b400";case"Treasurer":return"#4285f4";case"Secretary":return"#9c27b0";default:return"#666"}}changeMemberRole(n,t){return g(this,null,function*(){let e=yield this.pubServ.updateMemberRole(n.id,t)})}getAvailableRoles(n){let t=this.groupMembers.filter(e=>e.id!==n.id&&e.role).map(e=>e.role);return this.rolesList.filter(e=>!t.includes(e.value))}};l.\u0275fac=function(t){return new(t||l)(p(E),p(q),p(B),p(U),p(P))},l.\u0275cmp=M({type:l,selectors:[["app-members"]],decls:18,vars:5,consts:[[3,"translucent"],["color","primary"],[1,"ngo-members","ion-padding",3,"fullscreen"],[1,"members-hero","ion-padding-horizontal","ion-padding-vertical"],["name","people-outline",1,"members-hero-icon"],[1,"members-hero-title"],[1,"members-hero-subtitle"],["class","ion-text-center ion-margin-top",4,"ngIf"],["class","member-card",4,"ngFor","ngForOf"],["horizontal","end","vertical","bottom","slot","fixed","routerLink","/new-group"],["name","add-outline"],[1,"ion-text-center","ion-margin-top"],["name","people-outline","size","large","color","medium"],[1,"member-card"],[1,"member-header"],[1,"role"],["interface","popover","placeholder","Change Role",3,"ionChange","value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){t&1&&(r(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),s(3,"Members"),i()()(),r(4,"ion-content",2)(5,"section",3),u(6,"ion-icon",4),r(7,"h2",5),s(8,"Group Members"),i(),r(9,"p",6)(10,"b"),s(11,"Group:"),i(),s(12),i()(),f(13,K,4,0,"div",7)(14,W,13,7,"ion-card",8),r(15,"ion-fab",9)(16,"ion-fab-button",1),u(17,"ion-icon",10),i()()()),t&2&&(c("translucent",!0),o(4),c("fullscreen",!0),o(8),d(" ",(e.groupObject==null||e.groupObject[e.groupId]==null?null:e.groupObject[e.groupId].group_name)||"Loading..."," "),o(),c("ngIf",!e.groupMembers||e.groupMembers.length===0),o(),c("ngForOf",e.groupMembers))},dependencies:[z,D,$,V,G,T,L,R,S,y,F,H,N,A,k,j,w],styles:[".ngo-members[_ngcontent-%COMP%]{--background: #f8fbff}.ngo-members[_ngcontent-%COMP%]   .members-hero[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:18px}.ngo-members[_ngcontent-%COMP%]   .members-hero[_ngcontent-%COMP%]   .members-hero-icon[_ngcontent-%COMP%]{font-size:2.8rem;color:#3880ff;background:#3880ff1a;border-radius:50%;padding:10px;margin-bottom:8px}.ngo-members[_ngcontent-%COMP%]   .members-hero[_ngcontent-%COMP%]   .members-hero-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#222f3e;margin:0}.ngo-members[_ngcontent-%COMP%]   .members-hero[_ngcontent-%COMP%]   .members-hero-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:#3880ff;margin:2px 0 0}.ngo-members[_ngcontent-%COMP%]   .member-card[_ngcontent-%COMP%]{border-radius:14px;box-shadow:0 3px 12px #3880ff12;margin-bottom:14px;background:#fff}.ngo-members[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.ngo-members[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#222}.ngo-members[_ngcontent-%COMP%]   .member-header[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{font-size:14px;font-weight:500}"]});let a=l;return a})();export{le as MembersPage};
