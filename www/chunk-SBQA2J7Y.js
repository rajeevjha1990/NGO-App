import{a as ee}from"./chunk-SP2N6BLA.js";import{b as Z}from"./chunk-TRJ775NK.js";import{$a as Y,Aa as U,Ba as J,E as h,G as v,H as k,J as E,L as w,La as K,M as S,N as G,O as q,Oa as Q,Pa as W,Ra as X,V as D,da as F,ea as R,g as P,h as O,j as a,k as u,l as M,m,n as p,na as T,o,oa as z,p as t,q as _,qa as j,r as I,ra as B,s as x,sa as L,t as l,ta as A,va as V,w as d,wa as $,x as y,xa as H,y as f,ya as N}from"./chunk-6RAZA6VU.js";import"./chunk-AW7IZUNH.js";import"./chunk-QUJFQN2Y.js";import"./chunk-4SQRGWZO.js";import"./chunk-AGW4ECHM.js";import"./chunk-FHFIUQVW.js";import"./chunk-4QUK7M54.js";import"./chunk-KEPJZG4G.js";import"./chunk-J4TEZE7G.js";import"./chunk-WI6SOTL5.js";import"./chunk-QNCTVU3D.js";import"./chunk-KYMKABGL.js";import"./chunk-44WLN7XP.js";import"./chunk-IZQDRDWN.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-H7IJB4EE.js";import"./chunk-CKP3SGE2.js";import"./chunk-BVXZQL7V.js";import"./chunk-26IOXOZM.js";import"./chunk-EQZVBGP4.js";import"./chunk-NPYKXPTT.js";import"./chunk-LSNLUNBJ.js";import"./chunk-DNTR6X5U.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-G7SWQJ6W.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{h as g}from"./chunk-B7O3QC5Z.js";function te(e,c){if(e&1&&(o(0,"small",20),d(1),t()),e&2){let n=l().$implicit,r=l();a(),f(" ",r.programObject[n.group_program].program_name," ")}}function ne(e,c){e&1&&(o(0,"ion-badge",21),d(1,"Active"),t())}function oe(e,c){e&1&&(o(0,"ion-badge",22),d(1,"Closed"),t())}function ie(e,c){if(e&1&&(o(0,"ion-button",23),d(1," Edit "),t()),e&2){let n=l().$implicit;p("routerLink",h("/edit-group/",n.group_id))}}function re(e,c){if(e&1){let n=I();o(0,"ion-button",24),x("click",function(){P(n);let s=l().$implicit,i=l();return O(i.requesteditGroup(s))}),d(1," Request for edit "),t()}}function ae(e,c){e&1&&(o(0,"ion-button",25),d(1," On your request administrator reviewing "),t())}function ce(e,c){if(e&1&&(o(0,"ion-col",10)(1,"ion-card")(2,"ion-card-header")(3,"div",11)(4,"div")(5,"h2",12),d(6),t(),m(7,te,2,1,"small",13),t(),o(8,"ion-badge",14),d(9),t()(),o(10,"ion-card-subtitle"),d(11),v(12,"date"),t()(),o(13,"ion-card-content")(14,"b"),d(15,"Senior EP:"),t(),d(16),_(17,"br"),o(18,"b"),d(19,"Status:"),t(),m(20,ne,2,0,"ion-badge",15)(21,oe,2,0,"ion-badge",16),t(),m(22,ie,2,2,"ion-button",17)(23,re,2,0,"ion-button",18)(24,ae,2,0,"ion-button",19),t()()),e&2){let n=c.$implicit,r=l();a(6),y(n.group_name),a(),p("ngIf",r.programObject[n.group_program]),a(),p("routerLink",h("/members/",n.group_id)),a(),f("",n.group_noof_member," Members"),a(2),f(" Created on: ",k(12,12,n.group_start_date,"dd MMM yyyy")," "),a(5),f(" ",n.group_senior_epno," "),a(4),p("ngIf",n.group_status==1),a(),p("ngIf",n.group_status==0),a(),p("ngIf",n.group_status==2),a(),p("ngIf",n.group_status==1&&!n.hasEditRequest),a(),p("ngIf",n.group_status==1&&n.hasEditRequest)}}var xe=(()=>{let c=class c{constructor(r,s,i,b){this.userServ=r,this.pubServ=s,this.alertCtrl=i,this.cdr=b,this.groups=[],this.programObject={},this.editrequests=[]}ngOnInit(){}ionViewDidEnter(){return g(this,null,function*(){yield this.loadData(),this.cdr.markForCheck()})}doRefresh(){return g(this,null,function*(){yield this.loadData(),this.cdr.markForCheck()})}loadData(){return g(this,null,function*(){let r=yield this.userServ.epGroupAndProgram();this.groups=r.groups;let s=r.programs;this.programObject={},s.forEach(i=>{this.programObject[i.program_id]=i}),this.editrequests=yield this.pubServ.alleditRequests(),this.groups.forEach(i=>{let b=this.editrequests.find(C=>C.group_id==i.group_id&&C.status==1);i.hasEditRequest=!!b}),this.cdr.markForCheck()})}requesteditGroup(r){return g(this,null,function*(){yield(yield this.alertCtrl.create({header:"Request Group Edit",message:"Enter your reason for editing "+r.group_name,inputs:[{name:"reason",type:"text",placeholder:"Enter reason"}],buttons:[{text:"Cancel",role:"cancel"},{text:"Send Request",handler:i=>g(this,null,function*(){return i.reason?(yield this.pubServ.requestEditGroup(r.group_id,i.reason),yield this.loadData(),!0):!1})}]})).present()})}ngOnDestroy(){}trackById(r,s){return s.id}};c.\u0275fac=function(s){return new(s||c)(u(Z),u(ee),u(Y),u(E))},c.\u0275cmp=M({type:c,selectors:[["app-groups"]],decls:15,vars:4,consts:[[3,"translucent"],[1,"ion-padding",3,"fullscreen"],[2,"text-align","center"],["size","12",4,"ngFor","ngForOf","ngForTrackBy"],["horizontal","end","vertical","bottom","slot","fixed"],["routerLink","/new-group"],["name","add-outline"],["horizontal","end","vertical","bottom","slot","fixed",2,"margin-bottom","80px"],[3,"click"],["name","refresh-outline"],["size","12"],[1,"ion-flex","ion-justify-content-between","ion-align-items-center"],[1,"group-title"],["class","program-name",4,"ngIf"],[3,"routerLink"],["color","success",4,"ngIf"],["color","medium",4,"ngIf"],["expand","block",3,"routerLink",4,"ngIf"],["expand","block",3,"click",4,"ngIf"],["expand","block","color","medium","disabled","true",4,"ngIf"],[1,"program-name"],["color","success"],["color","medium"],["expand","block",3,"routerLink"],["expand","block",3,"click"],["expand","block","color","medium","disabled","true"]],template:function(s,i){s&1&&(o(0,"ion-header",0)(1,"ion-toolbar"),_(2,"ion-title"),t()(),o(3,"ion-content",1)(4,"h1",2),d(5,"Groups"),t(),o(6,"ion-grid")(7,"ion-row"),m(8,ce,25,15,"ion-col",3),t()(),o(9,"ion-fab",4)(10,"ion-fab-button",5),_(11,"ion-icon",6),t()(),o(12,"ion-fab",7)(13,"ion-fab-button",8),x("click",function(){return i.doRefresh()}),_(14,"ion-icon",9),t()()()),s&2&&(p("translucent",!0),a(3),p("fullscreen",!0),a(5),p("ngForOf",i.groups)("ngForTrackBy",i.trackById))},dependencies:[z,V,$,U,J,X,K,Q,W,j,L,B,q,w,S,R,T,A,H,N,F,D,G],styles:['ion-content[_ngcontent-%COMP%]{--background: #f4f7fa}h1[_ngcontent-%COMP%]{font-size:24px;font-weight:800;color:#333;margin-bottom:20px;letter-spacing:.5px}ion-card[_ngcontent-%COMP%]{margin:12px 4px;border-radius:16px;box-shadow:0 4px 12px #0000000d;border:1px solid rgba(255,255,255,.8);background:#fff;overflow:hidden}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding-bottom:8px;border-bottom:1px dashed #eee}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#1a1a1a;margin:0}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   .program-name[_ngcontent-%COMP%]{font-size:12px;color:#6a1b9a;font-weight:600;text-transform:uppercase}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;--padding-top: 5px;--padding-bottom: 5px;border-radius:8px;font-weight:600;background:#e8f0fe;color:#1a73e8;cursor:pointer}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{font-size:11px;margin-top:8px;color:#888}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:16px;font-size:14px;color:#444;line-height:1.6}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#666;font-weight:600}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{margin-left:5px;font-size:10px;text-transform:uppercase;letter-spacing:.5px}ion-card[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0 16px 16px;--border-radius: 10px;--box-shadow: none;font-weight:700;font-size:14px;height:45px}ion-card[_ngcontent-%COMP%]   ion-button[color=medium][_ngcontent-%COMP%]{--background: #f0f0f0;color:#888;font-size:12px;font-weight:500}ion-fab-button[_ngcontent-%COMP%]{--box-shadow: 0 8px 16px rgba(0, 0, 0, .15);--border-radius: 14px}ion-fab-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}ion-fab[style*="margin-bottom: 80px"][_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]{--background: #ffffff;--color: #2e7d32}.ion-flex[_ngcontent-%COMP%]{display:flex}.ion-justify-content-between[_ngcontent-%COMP%]{justify-content:space-between}.ion-align-items-center[_ngcontent-%COMP%]{align-items:center}'],changeDetection:0});let e=c;return e})();export{xe as GroupsPage};
