import{Va as o,Wa as n,_a as h,a as u,d as c,e as p,fb as v}from"./chunk-6RAZA6VU.js";import{h as s}from"./chunk-B7O3QC5Z.js";var a=class{constructor(){this.volntr_id=0,this.volntr_name="",this.volntr_mobile="",this.volntr_email="",this.volntr_address="",this.loggedIn=!1,this.volntr_ep_temp="",this.volntr_qualification="",this.volntr_pincode=0,this.volntr_join_date="",this.volntr_status=1,this.volntr_image=""}};var j=(()=>{let i=class i{constructor(e,t){this.authServ=e,this.svjHttp=t,this.userdata="",this.mobile="",this.volenteerObj=new a,this.volenteer=new u(this.volenteerObj),this.authkey="",this.init()}init(){return s(this,null,function*(){if(this.loadFromStorage(),this.authkey=yield this.getAuthKey(),this.authkey){let e=yield this.getVolenteerProfileFromServer();e&&e.volntr_id&&(e.loggedIn=!0,this.volenteerObj=e,this.volenteer.next(this.volenteerObj),localStorage.setItem("volenteer",JSON.stringify(this.volenteerObj)))}})}getAuthKey(){return s(this,null,function*(){return this.authkey||(this.authkey=yield this.authServ.getAuthkey()),this.authkey})}login(e){return s(this,null,function*(){let t=o+"/login",r=yield this.svjHttp.post(t,e);return r&&r.authkey&&(this.authkey=r.authkey,this.svjHttp.authkey=this.authkey,this.authServ.setAuthkey(this.authkey),this.getVolenteerProfileFromServer()),r})}logout(){return s(this,null,function*(){let e=o+"logout";try{(yield this.svjHttp.post(e,{},{}))?(this.authServ.clear(),this.volenteerObj=new a,this.volenteer.next(this.volenteerObj),localStorage.clear()):console.warn("Logout failed on server, token not cleared")}catch(t){console.error("Logout failed:",t)}})}getUserProfile(){return s(this,null,function*(){return(!this.volenteerObj.volntr_name||this.volenteerObj.volntr_name.length===0)&&(yield this.getVolenteerProfileFromServer()),this.volenteerObj})}getVolenteerProfileFromServer(){return s(this,null,function*(){let e=o+"get_volunteer";try{let t=yield this.svjHttp.post(e,{});return console.log(t),t&&t.volunteer.volntr_id&&(this.volenteerObj={volntr_id:t.volunteer.volntr_id,volntr_name:t.volunteer.volntr_name,volntr_mobile:t.volunteer.volntr_mobile,volntr_email:t.volunteer.volntr_email,volntr_address:t.volunteer.volntr_address,volntr_ep_temp:t.volunteer.volntr_ep_temp,volntr_image:t.volunteer.volntr_image,loggedIn:!0},this.volenteer.next(this.volenteerObj)),this.volenteerObj}catch(t){return console.error("Error fetching user profile:",t),this.volenteerObj}})}volunteerRegistration(e){return s(this,null,function*(){let t=o+"volunteer_register",r=yield this.svjHttp.post(t,e);return console.log(r),r})}allusers(){return s(this,null,function*(){let e=o+"allUsers",t=yield this.svjHttp.post(e,{});return t?t.users:[]})}getProfile(){return s(this,null,function*(){let e=o+"get_profile",t=yield this.svjHttp.post(e,{});return t?t.profile:{}})}profileUpdate(e){return s(this,null,function*(){let t=o+"update_profile",r=yield this.svjHttp.post(t,e);return r&&r.volunteer&&(this.volenteerObj=r.volunteer,this.volenteer.next(this.volenteerObj),localStorage.setItem("volenteer",JSON.stringify(this.volenteerObj))),r})}changePassword(e){return s(this,null,function*(){let t=n+"change_password";return yield this.svjHttp.post(t,e)})}resetpassword(e){return s(this,null,function*(){let t=o+"reset_password";return yield this.svjHttp.post(t,e)})}checkMobileRegisterorNot(e){return s(this,null,function*(){let t=o+"check_mobile_registered";return yield this.svjHttp.post(t,e)})}createGroup(e){return s(this,null,function*(){let t=n+"new_group";return yield this.svjHttp.post(t,e)})}epGroups(){return s(this,null,function*(){let e=n+"epGropus",t=yield this.svjHttp.post(e,{});return t?t.groups:{}})}epGroupAndProgram(){return s(this,null,function*(){let e=n+"getProgramsAndGroups",t=yield this.svjHttp.post(e,{});return t?{programs:t.programs??[],groups:t.groups??[]}:{programs:[],groups:[]}})}saintriDistribution(e){return s(this,null,function*(){let t=n+"saintri_distribution";return yield this.svjHttp.post(t,e)})}pwdOtpVerification(e){return s(this,null,function*(){let t=o+"verify_forgot_otp";return yield this.svjHttp.post(t,e)})}sainitriCount(){return s(this,null,function*(){let e=n+"get_allsainetriCount",t=yield this.svjHttp.post(e,{});return t?t.countsaintri:{}})}groupCount(){return s(this,null,function*(){let e=n+"get_allGroupCount",t=yield this.svjHttp.post(e,{});return t?t.countgroup:{}})}loadFromStorage(){let e=JSON.parse(localStorage.getItem("volenteer")||"{}");e&&e.volntr_id&&(this.volenteerObj=e,this.volenteer.next(this.volenteerObj))}saveGroupPayment(e){return s(this,null,function*(){let t=o+"verify_forgot_otp";return yield this.svjHttp.post(t,e)})}assigneOrders(){return s(this,null,function*(){let e=n+"assigned_orders",t=yield this.svjHttp.post(e,{});return t?t.assigned_orders:[]})}myareaAssociates(){return s(this,null,function*(){let e=n+"near_my_associates",t=yield this.svjHttp.post(e,{});return t?t.nearmyassociates:[]})}orderAssignedChoosesAssociate(e){return s(this,null,function*(){let t=n+"order_assigned_your_associate";return yield this.svjHttp.post(t,e)})}};i.\u0275fac=function(t){return new(t||i)(p(h),p(v))},i.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"});let l=i;return l})();export{a,j as b};
